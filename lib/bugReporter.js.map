{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap f09a5274794caf155f92","webpack:///./src/index.js"],"names":["bugReporter","window","getTimeStamp","Date","getTime","log","content","debug","console","procCatch","err","data","msg","message","url","location","href","line","lineNumber","col","columnNumber","name","number","description","file","fileName","stack","sendData","wrap","fn","__wrapped__","apply","arguments","invoke","obj","method","args","createXMLHTTPObject","xmlhttp","XMLHttpFactories","XMLHttpRequest","ActiveXObject","i","len","length","e","formatParams","params","prefix","str","p","Object","prototype","hasOwnProperty","call","k","v","push","encodeURIComponent","join","report","cbSucs","cbFail","req","toUpperCase","open","setRequestHeader","JSON","stringify","onreadystatechange","readyState","status","responseText","send","copyProps","dst","time","sdk","ins","save","type","success","fail","procError","toLowerCase","indexOf","output","setTimeout","stacktrace","toString","callee","ext","f","caller","c","event","errorCharacter","injectSDK","cb","av","document","createElement","setAttribute","async","charset","onload","onerror","src","s","getElementsByTagName","parentNode","insertBefore","uninjectSDK","removeChild","initSDK","appId","appKey","appClass","dom","init","AV","extend","lc","then","catch","opts","text","navigator","screen","destory"],"mappings":"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","file":"bugReporter.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"bugReporter\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"bugReporter\"] = factory();\n\telse\n\t\troot[\"bugReporter\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap f09a5274794caf155f92","\nconst bugReporter = window.bugReporter || {};\n\n(function() {\n  if (window.bugReporter) {\n    return;\n  }\n\n  bugReporter.getTimeStamp = function() {\n    return (new Date()).getTime();\n  };\n\n  bugReporter.log = function(content) {\n    if (bugReporter.debug) {\n      console.log(content);\n    }\n  };\n\n  bugReporter.procCatch = function(err) {\n    const data = {\n      msg: err.message,\n      url: window.location.href,\n      line: err.lineNumber,\n      col: err.columnNumber,\n      err: {\n        name: err.name,\n        number: err.number,\n        description: err.description,\n        file: err.fileName\n      },\n      stack: err.stack\n    };\n    bugReporter.sendData(data);\n  };\n\n  bugReporter.wrap = function(fn) {\n    if (!fn.__wrapped__) {\n      fn.__wrapped__ = function() {\n        try {\n          return fn.apply(this, arguments);\n        } catch (err) {\n          bugReporter.procCatch(err);\n          throw err;\n        }\n      };\n    }\n    return fn.__wrapped__;\n  };\n\n  bugReporter.invoke = bugReporter.wrap(function(obj, method, args) {\n    return obj[method].apply(this, args);\n  });\n\n  const createXMLHTTPObject = function() {\n    let xmlhttp = false;\n    const XMLHttpFactories = [\n      function() {\n        return new XMLHttpRequest();\n      },\n      function() {\n        return new ActiveXObject('Msxml2.XMLHTTP');\n      },\n      function() {\n        return new ActiveXObject('Msxml3.XMLHTTP');\n      },\n      function() {\n        return new ActiveXObject('Microsoft.XMLHTTP');\n      }\n    ];\n\n    for (let i = 0, len = XMLHttpFactories.length; i < len; i++) {\n      try {\n        xmlhttp = XMLHttpFactories[i]();\n      } catch (e) {\n        continue;\n      }\n      break;\n    }\n\n    return xmlhttp;\n  };\n\n  const formatParams = function(params, prefix) {\n    let str = [];\n    for (let p in params) {\n      if (Object.prototype.hasOwnProperty.call(params, p)) {\n        const k = prefix ? `${prefix}[${p}]` : p;\n        const v = params[p];\n        str.push((typeof v === 'object')\n          ? formatParams(v, k)\n          : (encodeURIComponent(k) + '=' + encodeURIComponent(v))\n        );\n      }\n    }\n    return str.join('&');\n  };\n\n  bugReporter.report = function(method, url, data, cbSucs, cbFail) {\n    const req = createXMLHTTPObject();\n    if (!req) {\n      return cbFail && cbFail(req);\n    }\n\n    method = method.toUpperCase();\n    if (method === 'GET') {\n      url = `${url}?${formatParams(data)}&_t=${bugReporter.getTimeStamp()}`;\n      data = null;\n    }\n\n    req.open(method, url, true);\n    if (method === 'POST') {\n      req.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');\n    } else if (method === 'JSON') {\n      req.setRequestHeader('Content-type', 'application/json;charset=UTF-8');\n    }\n\n    if (data) {\n      data = JSON.stringify(data);\n    }\n\n    req.onreadystatechange = function() {\n      if (req.readyState === 4) {\n        if ((req.status >= 200) && (req.status < 300)) {\n          cbSucs && cbSucs(req.responseText);\n        } else {\n          cbFail && cbFail(req);\n        }\n      }\n    };\n\n    req.send(data);\n  };\n\n  const copyProps = function(data, name) {\n    const len = bugReporter[name].length;\n    if (!len || len < 1) {\n      return;\n    }\n    const dst = data[name] = {};\n    for (let i = 0; i < len; i++) {\n      dst[\n        bugReporter[name][i]\n      ] = (name === 'window') ? window[\n        bugReporter[name][i]\n      ] : window[name][\n        bugReporter[name][i]\n      ];\n    }\n  };\n\n  bugReporter.sendData = function(data) {\n    if (!data.time) {\n      data['time'] = bugReporter.getTimeStamp();\n    }\n\n    copyProps(data, 'window');\n    // if (bugReporter.window.length) {\n    //   data.window = {};\n    // }\n    // for(let i = 0, wLen = bugReporter.window.length; i < wLen; i++) {\n    //   data.window[\n    //     bugReporter.window[i]\n    //   ] = window[\n    //     bugReporter.window[i]\n    //   ];\n    // }\n\n    copyProps(data, 'navigator');\n    // if (bugReporter.navigator.length) {\n    //   data.navigator = {};\n    // }\n    // for(let j = 0, nLen = bugReporter.navigator.length; j < nLen; j++) {\n    //   data.navigator[\n    //     bugReporter.navigator[j]\n    //   ] = window.navigator[\n    //     bugReporter.navigator[j]\n    //   ];\n    // }\n\n    copyProps(data, 'screen');\n    // if (bugReporter.screen.length) {\n    //   data.screen = {};\n    // }\n    // for(let k = 0, sLen = bugReporter.screen.length; k < sLen; k++) {\n    //   data.screen[\n    //     bugReporter.screen[k]\n    //   ] = window.screen[\n    //     bugReporter.screen[k]\n    //   ];\n    // }\n\n    if (bugReporter.sdk.ins) {\n      bugReporter.sdk.save(data);\n    }\n\n    if (bugReporter.url) {\n      bugReporter.report(bugReporter.type, bugReporter.url,\n        data,\n        bugReporter.success,\n        bugReporter.fail\n      );\n    }\n\n    bugReporter.log(data);\n  };\n\n  const procError = function(msg, url, line, col, err) {\n    // 没有URL不上报！上报也不知道错误\n    if ((msg.toLowerCase().indexOf('script error') > -1) || !url) {\n      return !bugReporter.output;\n    }\n\n    setTimeout(function() {\n      let stack = null;\n      if (!!err && (!!err.stack || !!err.stacktrace)) {\n        //如果浏览器有堆栈信息 直接使用\n        stack = (err.stack || err.stacktrace).toString();\n      } else if (!!arguments.callee) { //尝试通过callee拿堆栈信息\n        let ext = [];\n        let f = arguments.callee.caller;\n        let c = 3; //这里只拿三层堆栈信息\n        while (f && (--c > 0)) {\n          ext.push(f.toString());\n          if (f === f.caller) {\n            break; //如果有环\n          }\n          f = f.caller;\n        }\n        stack = ext.join(',');\n      }\n\n      bugReporter.sendData({\n        msg, url, line,\n        col: col || (window.event && window.event.errorCharacter) || 0,\n        err, stack\n      });\n    }, 0);\n\n    // 让浏览器不输出错误信息到控制台\n    return !bugReporter.output;\n  };\n\n  bugReporter.injectSDK = function(cb) {\n    const av = document.createElement('script');\n    av.setAttribute('type', 'text/javascript');\n    av.async = true;\n    av.charset = 'utf-8';\n    if (av.readyState) {\n      av.onreadystatechange = function() {\n        if (av.readyState === 'loaded' || av.readyState === 'complete') {\n          av.onreadystatechange = null;\n          cb && cb(av);\n        }\n      };\n    } else {\n      av.onload = function() {\n        av.onload = null;\n        cb && cb(av);\n      };\n    }\n    av.onerror = function() {};\n    av.src = `${bugReporter.sdk.url}?_t=${(new Date()).getTime()}`;\n    const s = document.getElementsByTagName('script')[0];\n    s.parentNode.insertBefore(av, s);\n\n    bugReporter.uninjectSDK = function() {\n      av.parentNode.removeChild(av);\n    };\n  };\n\n  bugReporter.initSDK = function(appId, appKey, appClass) {\n    bugReporter.injectSDK(function(dom) {\n      setTimeout(function() {\n        bugReporter.sdk.ins = bugReporter.sdk.init(appId, appKey, appClass);\n      }, 0);\n    });\n  };\n\n  bugReporter.sdk = {\n    ins: null,\n    url: '//cdn1.lncld.net/static/js/av-min-1.5.3.js',\n    init: function(appId, appKey, appClass) {\n      if (window.AV && window.AV.init) {\n        window.AV.init({\n          appId, appKey\n        });\n        return window.AV.Object.extend(appClass);\n      }\n    },\n    save: function(data) {\n      const lc = new bugReporter.sdk.ins();\n      lc.save(data)\n        .then(function(obj) {\n          bugReporter.log(obj);\n        }).catch(function(err) {\n          bugReporter.log(err);\n        }\n      );\n    }\n  };\n\n  bugReporter.init = function(opts) {\n    if (!opts || (!opts.url && !opts.appId && !opts.appKey && !opts.appClass)) {\n      return;\n    }\n\n    bugReporter.appId = opts.appId;\n    bugReporter.appKey = opts.appKey;\n    bugReporter.appClass = opts.appClass;\n\n    bugReporter.debug = opts.debug || false;\n    bugReporter.output = opts.output || false;\n\n    bugReporter.url = opts.url;\n    bugReporter.type = opts.type || 'GET';\n    bugReporter.success = opts.success || function(text) {};\n    bugReporter.fail = opts.fail || function(req) {};\n\n    bugReporter.window = opts.window || [];\n    bugReporter.navigator = opts.navigator || [\n      'language', 'platform', 'userAgent'\n    ];\n    bugReporter.screen = opts.screen || ['width', 'height'];\n\n    window.onerror = procError;\n\n    if (bugReporter.appId && bugReporter.appKey && bugReporter.appClass) {\n      bugReporter.initSDK(\n        bugReporter.appId,\n        bugReporter.appKey,\n        bugReporter.appClass\n      );\n    }\n  };\n\n  bugReporter.destory = function() {\n    window.onerror = null;\n    if (bugReporter.sdk.ins) {\n      bugReporter.uninjectSDK();\n    }\n  };\n})();\n\nexport default bugReporter;\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js"],"sourceRoot":""}
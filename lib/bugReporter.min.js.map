{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///bugReporter.min.js","webpack:///webpack/bootstrap b422ee16b8a8b2fbaffb","webpack:///./src/index.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","Object","defineProperty","value","_typeof","Symbol","iterator","obj","constructor","prototype","bugReporter","window","getTimeStamp","Date","getTime","log","content","debug","console","procCatch","err","data","msg","message","url","location","href","line","lineNumber","col","columnNumber","name","number","description","file","fileName","stack","sendData","wrap","fn","__wrapped__","apply","arguments","invoke","method","args","createXMLHTTPObject","xmlhttp","XMLHttpFactories","XMLHttpRequest","ActiveXObject","i","len","length","e","formatParams","params","prefix","str","hasOwnProperty","k","v","push","encodeURIComponent","join","report","cbSucs","cbFail","req","toUpperCase","open","setRequestHeader","JSON","stringify","onreadystatechange","readyState","status","responseText","send","copyProps","dst","time","sdk","ins","save","type","success","fail","procError","toLowerCase","indexOf","output","setTimeout","stacktrace","toString","callee","ext","f","caller","event","errorCharacter","injectSDK","cb","av","document","createElement","setAttribute","async","charset","onload","onerror","src","s","getElementsByTagName","parentNode","insertBefore","uninjectSDK","removeChild","initSDK","appId","appKey","appClass","dom","init","AV","extend","lc","then","catch","opts","text","navigator","screen","destory","default"],"mappings":"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","file":"bugReporter.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"bugReporter\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"bugReporter\"] = factory();\n\telse\n\t\troot[\"bugReporter\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"bugReporter\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"bugReporter\"] = factory();\n\telse\n\t\troot[\"bugReporter\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\tvar bugReporter = window.bugReporter || {};\n\t\n\t(function () {\n\t  if (window.bugReporter) {\n\t    return;\n\t  }\n\t\n\t  bugReporter.getTimeStamp = function () {\n\t    return new Date().getTime();\n\t  };\n\t\n\t  bugReporter.log = function (content) {\n\t    if (bugReporter.debug) {\n\t      console.log(content);\n\t    }\n\t  };\n\t\n\t  bugReporter.procCatch = function (err) {\n\t    var data = {\n\t      msg: err.message,\n\t      url: window.location.href,\n\t      line: err.lineNumber,\n\t      col: err.columnNumber,\n\t      err: {\n\t        name: err.name,\n\t        number: err.number,\n\t        description: err.description,\n\t        file: err.fileName\n\t      },\n\t      stack: err.stack\n\t    };\n\t    bugReporter.sendData(data);\n\t  };\n\t\n\t  bugReporter.wrap = function (fn) {\n\t    if (!fn.__wrapped__) {\n\t      fn.__wrapped__ = function () {\n\t        try {\n\t          return fn.apply(this, arguments);\n\t        } catch (err) {\n\t          bugReporter.procCatch(err);\n\t          throw err;\n\t        }\n\t      };\n\t    }\n\t    return fn.__wrapped__;\n\t  };\n\t\n\t  bugReporter.invoke = bugReporter.wrap(function (obj, method, args) {\n\t    return obj[method].apply(this, args);\n\t  });\n\t\n\t  var createXMLHTTPObject = function createXMLHTTPObject() {\n\t    var xmlhttp = false;\n\t    var XMLHttpFactories = [function () {\n\t      return new XMLHttpRequest();\n\t    }, function () {\n\t      return new ActiveXObject('Msxml2.XMLHTTP');\n\t    }, function () {\n\t      return new ActiveXObject('Msxml3.XMLHTTP');\n\t    }, function () {\n\t      return new ActiveXObject('Microsoft.XMLHTTP');\n\t    }];\n\t\n\t    for (var i = 0, len = XMLHttpFactories.length; i < len; i++) {\n\t      try {\n\t        xmlhttp = XMLHttpFactories[i]();\n\t      } catch (e) {\n\t        continue;\n\t      }\n\t      break;\n\t    }\n\t\n\t    return xmlhttp;\n\t  };\n\t\n\t  var formatParams = function formatParams(params, prefix) {\n\t    var str = [];\n\t    for (var p in params) {\n\t      if (Object.prototype.hasOwnProperty.call(params, p)) {\n\t        var k = prefix ? prefix + '[' + p + ']' : p;\n\t        var v = params[p];\n\t        str.push((typeof v === 'undefined' ? 'undefined' : _typeof(v)) === 'object' ? formatParams(v, k) : encodeURIComponent(k) + '=' + encodeURIComponent(v));\n\t      }\n\t    }\n\t    return str.join('&');\n\t  };\n\t\n\t  bugReporter.report = function (method, url, data, cbSucs, cbFail) {\n\t    var req = createXMLHTTPObject();\n\t    if (!req) {\n\t      return cbFail && cbFail(req);\n\t    }\n\t\n\t    method = method.toUpperCase();\n\t    if (method === 'GET') {\n\t      url = url + '?' + formatParams(data) + '&_t=' + bugReporter.getTimeStamp();\n\t      data = null;\n\t    }\n\t\n\t    req.open(method, url, true);\n\t    if (method === 'POST') {\n\t      req.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');\n\t    } else if (method === 'JSON') {\n\t      req.setRequestHeader('Content-type', 'application/json;charset=UTF-8');\n\t    }\n\t\n\t    if (data) {\n\t      data = JSON.stringify(data);\n\t    }\n\t\n\t    req.onreadystatechange = function () {\n\t      if (req.readyState === 4) {\n\t        if (req.status >= 200 && req.status < 300) {\n\t          cbSucs && cbSucs(req.responseText);\n\t        } else {\n\t          cbFail && cbFail(req);\n\t        }\n\t      }\n\t    };\n\t\n\t    req.send(data);\n\t  };\n\t\n\t  var copyProps = function copyProps(data, name) {\n\t    var len = bugReporter[name].length;\n\t    if (!len || len < 1) {\n\t      return;\n\t    }\n\t    var dst = data[name] = {};\n\t    for (var i = 0; i < len; i++) {\n\t      dst[bugReporter[name][i]] = name === 'window' ? window[bugReporter[name][i]] : window[name][bugReporter[name][i]];\n\t    }\n\t  };\n\t\n\t  bugReporter.sendData = function (data) {\n\t    if (!data.time) {\n\t      data['time'] = bugReporter.getTimeStamp();\n\t    }\n\t\n\t    copyProps(data, 'window');\n\t    // if (bugReporter.window.length) {\n\t    //   data.window = {};\n\t    // }\n\t    // for(let i = 0, wLen = bugReporter.window.length; i < wLen; i++) {\n\t    //   data.window[\n\t    //     bugReporter.window[i]\n\t    //   ] = window[\n\t    //     bugReporter.window[i]\n\t    //   ];\n\t    // }\n\t\n\t    copyProps(data, 'navigator');\n\t    // if (bugReporter.navigator.length) {\n\t    //   data.navigator = {};\n\t    // }\n\t    // for(let j = 0, nLen = bugReporter.navigator.length; j < nLen; j++) {\n\t    //   data.navigator[\n\t    //     bugReporter.navigator[j]\n\t    //   ] = window.navigator[\n\t    //     bugReporter.navigator[j]\n\t    //   ];\n\t    // }\n\t\n\t    copyProps(data, 'screen');\n\t    // if (bugReporter.screen.length) {\n\t    //   data.screen = {};\n\t    // }\n\t    // for(let k = 0, sLen = bugReporter.screen.length; k < sLen; k++) {\n\t    //   data.screen[\n\t    //     bugReporter.screen[k]\n\t    //   ] = window.screen[\n\t    //     bugReporter.screen[k]\n\t    //   ];\n\t    // }\n\t\n\t    if (bugReporter.sdk.ins) {\n\t      bugReporter.sdk.save(data);\n\t    }\n\t\n\t    if (bugReporter.url) {\n\t      bugReporter.report(bugReporter.type, bugReporter.url, data, bugReporter.success, bugReporter.fail);\n\t    }\n\t\n\t    bugReporter.log(data);\n\t  };\n\t\n\t  var procError = function procError(msg, url, line, col, err) {\n\t    // 没有URL不上报！上报也不知道错误\n\t    if (msg.toLowerCase().indexOf('script error') > -1 || !url) {\n\t      return !bugReporter.output;\n\t    }\n\t\n\t    setTimeout(function () {\n\t      var stack = null;\n\t      if (!!err && (!!err.stack || !!err.stacktrace)) {\n\t        //如果浏览器有堆栈信息 直接使用\n\t        stack = (err.stack || err.stacktrace).toString();\n\t      } else if (!!arguments.callee) {\n\t        //尝试通过callee拿堆栈信息\n\t        var ext = [];\n\t        var f = arguments.callee.caller;\n\t        var c = 3; //这里只拿三层堆栈信息\n\t        while (f && --c > 0) {\n\t          ext.push(f.toString());\n\t          if (f === f.caller) {\n\t            break; //如果有环\n\t          }\n\t          f = f.caller;\n\t        }\n\t        stack = ext.join(',');\n\t      }\n\t\n\t      bugReporter.sendData({\n\t        msg: msg, url: url, line: line,\n\t        col: col || window.event && window.event.errorCharacter || 0,\n\t        err: err, stack: stack\n\t      });\n\t    }, 0);\n\t\n\t    // 让浏览器不输出错误信息到控制台\n\t    return !bugReporter.output;\n\t  };\n\t\n\t  bugReporter.injectSDK = function (cb) {\n\t    var av = document.createElement('script');\n\t    av.setAttribute('type', 'text/javascript');\n\t    av.async = true;\n\t    av.charset = 'utf-8';\n\t    if (av.readyState) {\n\t      av.onreadystatechange = function () {\n\t        if (av.readyState === 'loaded' || av.readyState === 'complete') {\n\t          av.onreadystatechange = null;\n\t          cb && cb(av);\n\t        }\n\t      };\n\t    } else {\n\t      av.onload = function () {\n\t        av.onload = null;\n\t        cb && cb(av);\n\t      };\n\t    }\n\t    av.onerror = function () {};\n\t    av.src = bugReporter.sdk.url + '?_t=' + new Date().getTime();\n\t    var s = document.getElementsByTagName('script')[0];\n\t    s.parentNode.insertBefore(av, s);\n\t\n\t    bugReporter.uninjectSDK = function () {\n\t      av.parentNode.removeChild(av);\n\t    };\n\t  };\n\t\n\t  bugReporter.initSDK = function (appId, appKey, appClass) {\n\t    bugReporter.injectSDK(function (dom) {\n\t      setTimeout(function () {\n\t        bugReporter.sdk.ins = bugReporter.sdk.init(appId, appKey, appClass);\n\t      }, 0);\n\t    });\n\t  };\n\t\n\t  bugReporter.sdk = {\n\t    ins: null,\n\t    url: '//cdn1.lncld.net/static/js/av-min-1.5.3.js',\n\t    init: function init(appId, appKey, appClass) {\n\t      if (window.AV && window.AV.init) {\n\t        window.AV.init({\n\t          appId: appId, appKey: appKey\n\t        });\n\t        return window.AV.Object.extend(appClass);\n\t      }\n\t    },\n\t    save: function save(data) {\n\t      var lc = new bugReporter.sdk.ins();\n\t      lc.save(data).then(function (obj) {\n\t        bugReporter.log(obj);\n\t      }).catch(function (err) {\n\t        bugReporter.log(err);\n\t      });\n\t    }\n\t  };\n\t\n\t  bugReporter.init = function (opts) {\n\t    if (!opts || !opts.url && !opts.appId && !opts.appKey && !opts.appClass) {\n\t      return;\n\t    }\n\t\n\t    bugReporter.appId = opts.appId;\n\t    bugReporter.appKey = opts.appKey;\n\t    bugReporter.appClass = opts.appClass;\n\t\n\t    bugReporter.debug = opts.debug || false;\n\t    bugReporter.output = opts.output || false;\n\t\n\t    bugReporter.url = opts.url;\n\t    bugReporter.type = opts.type || 'GET';\n\t    bugReporter.success = opts.success || function (text) {};\n\t    bugReporter.fail = opts.fail || function (req) {};\n\t\n\t    bugReporter.window = opts.window || [];\n\t    bugReporter.navigator = opts.navigator || ['language', 'platform', 'userAgent'];\n\t    bugReporter.screen = opts.screen || ['width', 'height'];\n\t\n\t    window.onerror = procError;\n\t\n\t    if (bugReporter.appId && bugReporter.appKey && bugReporter.appClass) {\n\t      bugReporter.initSDK(bugReporter.appId, bugReporter.appKey, bugReporter.appClass);\n\t    }\n\t  };\n\t\n\t  bugReporter.destory = function () {\n\t    window.onerror = null;\n\t    if (bugReporter.sdk.ins) {\n\t      bugReporter.uninjectSDK();\n\t    }\n\t  };\n\t})();\n\t\n\texports.default = bugReporter;\n\tmodule.exports = exports['default'];\n\n/***/ }\n/******/ ])\n});\n;\n\n\n// WEBPACK FOOTER //\n// bugReporter.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap b422ee16b8a8b2fbaffb","\nconst bugReporter = window.bugReporter || {};\n\n(function() {\n  if (window.bugReporter) {\n    return;\n  }\n\n  bugReporter.getTimeStamp = function() {\n    return (new Date()).getTime();\n  };\n\n  bugReporter.log = function(content) {\n    if (bugReporter.debug) {\n      console.log(content);\n    }\n  };\n\n  bugReporter.procCatch = function(err) {\n    const data = {\n      msg: err.message,\n      url: window.location.href,\n      line: err.lineNumber,\n      col: err.columnNumber,\n      err: {\n        name: err.name,\n        number: err.number,\n        description: err.description,\n        file: err.fileName\n      },\n      stack: err.stack\n    };\n    bugReporter.sendData(data);\n  };\n\n  bugReporter.wrap = function(fn) {\n    if (!fn.__wrapped__) {\n      fn.__wrapped__ = function() {\n        try {\n          return fn.apply(this, arguments);\n        } catch (err) {\n          bugReporter.procCatch(err);\n          throw err;\n        }\n      };\n    }\n    return fn.__wrapped__;\n  };\n\n  bugReporter.invoke = bugReporter.wrap(function(obj, method, args) {\n    return obj[method].apply(this, args);\n  });\n\n  const createXMLHTTPObject = function() {\n    let xmlhttp = false;\n    const XMLHttpFactories = [\n      function() {\n        return new XMLHttpRequest();\n      },\n      function() {\n        return new ActiveXObject('Msxml2.XMLHTTP');\n      },\n      function() {\n        return new ActiveXObject('Msxml3.XMLHTTP');\n      },\n      function() {\n        return new ActiveXObject('Microsoft.XMLHTTP');\n      }\n    ];\n\n    for (let i = 0, len = XMLHttpFactories.length; i < len; i++) {\n      try {\n        xmlhttp = XMLHttpFactories[i]();\n      } catch (e) {\n        continue;\n      }\n      break;\n    }\n\n    return xmlhttp;\n  };\n\n  const formatParams = function(params, prefix) {\n    let str = [];\n    for (let p in params) {\n      if (Object.prototype.hasOwnProperty.call(params, p)) {\n        const k = prefix ? `${prefix}[${p}]` : p;\n        const v = params[p];\n        str.push((typeof v === 'object')\n          ? formatParams(v, k)\n          : (encodeURIComponent(k) + '=' + encodeURIComponent(v))\n        );\n      }\n    }\n    return str.join('&');\n  };\n\n  bugReporter.report = function(method, url, data, cbSucs, cbFail) {\n    const req = createXMLHTTPObject();\n    if (!req) {\n      return cbFail && cbFail(req);\n    }\n\n    method = method.toUpperCase();\n    if (method === 'GET') {\n      url = `${url}?${formatParams(data)}&_t=${bugReporter.getTimeStamp()}`;\n      data = null;\n    }\n\n    req.open(method, url, true);\n    if (method === 'POST') {\n      req.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');\n    } else if (method === 'JSON') {\n      req.setRequestHeader('Content-type', 'application/json;charset=UTF-8');\n    }\n\n    if (data) {\n      data = JSON.stringify(data);\n    }\n\n    req.onreadystatechange = function() {\n      if (req.readyState === 4) {\n        if ((req.status >= 200) && (req.status < 300)) {\n          cbSucs && cbSucs(req.responseText);\n        } else {\n          cbFail && cbFail(req);\n        }\n      }\n    };\n\n    req.send(data);\n  };\n\n  const copyProps = function(data, name) {\n    const len = bugReporter[name].length;\n    if (!len || len < 1) {\n      return;\n    }\n    const dst = data[name] = {};\n    for (let i = 0; i < len; i++) {\n      dst[\n        bugReporter[name][i]\n      ] = (name === 'window') ? window[\n        bugReporter[name][i]\n      ] : window[name][\n        bugReporter[name][i]\n      ];\n    }\n  };\n\n  bugReporter.sendData = function(data) {\n    if (!data.time) {\n      data['time'] = bugReporter.getTimeStamp();\n    }\n\n    copyProps(data, 'window');\n    // if (bugReporter.window.length) {\n    //   data.window = {};\n    // }\n    // for(let i = 0, wLen = bugReporter.window.length; i < wLen; i++) {\n    //   data.window[\n    //     bugReporter.window[i]\n    //   ] = window[\n    //     bugReporter.window[i]\n    //   ];\n    // }\n\n    copyProps(data, 'navigator');\n    // if (bugReporter.navigator.length) {\n    //   data.navigator = {};\n    // }\n    // for(let j = 0, nLen = bugReporter.navigator.length; j < nLen; j++) {\n    //   data.navigator[\n    //     bugReporter.navigator[j]\n    //   ] = window.navigator[\n    //     bugReporter.navigator[j]\n    //   ];\n    // }\n\n    copyProps(data, 'screen');\n    // if (bugReporter.screen.length) {\n    //   data.screen = {};\n    // }\n    // for(let k = 0, sLen = bugReporter.screen.length; k < sLen; k++) {\n    //   data.screen[\n    //     bugReporter.screen[k]\n    //   ] = window.screen[\n    //     bugReporter.screen[k]\n    //   ];\n    // }\n\n    if (bugReporter.sdk.ins) {\n      bugReporter.sdk.save(data);\n    }\n\n    if (bugReporter.url) {\n      bugReporter.report(bugReporter.type, bugReporter.url,\n        data,\n        bugReporter.success,\n        bugReporter.fail\n      );\n    }\n\n    bugReporter.log(data);\n  };\n\n  const procError = function(msg, url, line, col, err) {\n    // 没有URL不上报！上报也不知道错误\n    if ((msg.toLowerCase().indexOf('script error') > -1) || !url) {\n      return !bugReporter.output;\n    }\n\n    setTimeout(function() {\n      let stack = null;\n      if (!!err && (!!err.stack || !!err.stacktrace)) {\n        //如果浏览器有堆栈信息 直接使用\n        stack = (err.stack || err.stacktrace).toString();\n      } else if (!!arguments.callee) { //尝试通过callee拿堆栈信息\n        let ext = [];\n        let f = arguments.callee.caller;\n        let c = 3; //这里只拿三层堆栈信息\n        while (f && (--c > 0)) {\n          ext.push(f.toString());\n          if (f === f.caller) {\n            break; //如果有环\n          }\n          f = f.caller;\n        }\n        stack = ext.join(',');\n      }\n\n      bugReporter.sendData({\n        msg, url, line,\n        col: col || (window.event && window.event.errorCharacter) || 0,\n        err, stack\n      });\n    }, 0);\n\n    // 让浏览器不输出错误信息到控制台\n    return !bugReporter.output;\n  };\n\n  bugReporter.injectSDK = function(cb) {\n    const av = document.createElement('script');\n    av.setAttribute('type', 'text/javascript');\n    av.async = true;\n    av.charset = 'utf-8';\n    if (av.readyState) {\n      av.onreadystatechange = function() {\n        if (av.readyState === 'loaded' || av.readyState === 'complete') {\n          av.onreadystatechange = null;\n          cb && cb(av);\n        }\n      };\n    } else {\n      av.onload = function() {\n        av.onload = null;\n        cb && cb(av);\n      };\n    }\n    av.onerror = function() {};\n    av.src = `${bugReporter.sdk.url}?_t=${(new Date()).getTime()}`;\n    const s = document.getElementsByTagName('script')[0];\n    s.parentNode.insertBefore(av, s);\n\n    bugReporter.uninjectSDK = function() {\n      av.parentNode.removeChild(av);\n    };\n  };\n\n  bugReporter.initSDK = function(appId, appKey, appClass) {\n    bugReporter.injectSDK(function(dom) {\n      setTimeout(function() {\n        bugReporter.sdk.ins = bugReporter.sdk.init(appId, appKey, appClass);\n      }, 0);\n    });\n  };\n\n  bugReporter.sdk = {\n    ins: null,\n    url: '//cdn1.lncld.net/static/js/av-min-1.5.3.js',\n    init: function(appId, appKey, appClass) {\n      if (window.AV && window.AV.init) {\n        window.AV.init({\n          appId, appKey\n        });\n        return window.AV.Object.extend(appClass);\n      }\n    },\n    save: function(data) {\n      const lc = new bugReporter.sdk.ins();\n      lc.save(data)\n        .then(function(obj) {\n          bugReporter.log(obj);\n        }).catch(function(err) {\n          bugReporter.log(err);\n        }\n      );\n    }\n  };\n\n  bugReporter.init = function(opts) {\n    if (!opts || (!opts.url && !opts.appId && !opts.appKey && !opts.appClass)) {\n      return;\n    }\n\n    bugReporter.appId = opts.appId;\n    bugReporter.appKey = opts.appKey;\n    bugReporter.appClass = opts.appClass;\n\n    bugReporter.debug = opts.debug || false;\n    bugReporter.output = opts.output || false;\n\n    bugReporter.url = opts.url;\n    bugReporter.type = opts.type || 'GET';\n    bugReporter.success = opts.success || function(text) {};\n    bugReporter.fail = opts.fail || function(req) {};\n\n    bugReporter.window = opts.window || [];\n    bugReporter.navigator = opts.navigator || [\n      'language', 'platform', 'userAgent'\n    ];\n    bugReporter.screen = opts.screen || ['width', 'height'];\n\n    window.onerror = procError;\n\n    if (bugReporter.appId && bugReporter.appKey && bugReporter.appClass) {\n      bugReporter.initSDK(\n        bugReporter.appId,\n        bugReporter.appKey,\n        bugReporter.appClass\n      );\n    }\n  };\n\n  bugReporter.destory = function() {\n    window.onerror = null;\n    if (bugReporter.sdk.ins) {\n      bugReporter.uninjectSDK();\n    }\n  };\n})();\n\nexport default bugReporter;\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js"],"sourceRoot":""}
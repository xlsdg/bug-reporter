{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///bugReporter.min.js","webpack:///webpack/bootstrap 1e3d8c162e734281fab3","webpack:///./src/index.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","Object","defineProperty","value","_typeof","Symbol","iterator","obj","constructor","prototype","bugReporter","window","getTimeStamp","Date","getTime","createXMLHTTPObject","xmlhttp","XMLHttpFactories","XMLHttpRequest","ActiveXObject","i","len","length","e","formatParams","params","prefix","str","hasOwnProperty","k","v","push","encodeURIComponent","join","report","method","url","data","cbSucs","cbFail","req","toUpperCase","open","setRequestHeader","onreadystatechange","readyState","status","responseText","send","procData","wLen","navigator","j","nLen","screen","sLen","bug","JSON","stringify","sdk","ins","save","type","success","fail","debug","console","log","procError","msg","line","col","err","toLowerCase","indexOf","output","setTimeout","stack","stacktrace","toString","arguments","callee","ext","f","caller","time","event","errorCharacter","injectSDK","cb","av","document","createElement","setAttribute","src","onload","s","getElementsByTagName","parentNode","insertBefore","uninjectSDK","removeChild","initSDK","appId","appKey","appClass","init","AV","extend","lc","then","catch","error","opts","text","onerror","destory","default"],"mappings":"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","file":"bugReporter.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"bugReporter\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"bugReporter\"] = factory();\n\telse\n\t\troot[\"bugReporter\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"bugReporter\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"bugReporter\"] = factory();\n\telse\n\t\troot[\"bugReporter\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\tvar bugReporter = window.bugReporter || {};\n\t\n\t(function () {\n\t  if (window.bugReporter) {\n\t    return;\n\t  }\n\t\n\t  var getTimeStamp = function getTimeStamp() {\n\t    return new Date().getTime();\n\t  };\n\t  bugReporter.getTimeStamp = getTimeStamp;\n\t\n\t  var createXMLHTTPObject = function createXMLHTTPObject() {\n\t    var xmlhttp = false;\n\t    var XMLHttpFactories = [function () {\n\t      return new XMLHttpRequest();\n\t    }, function () {\n\t      return new ActiveXObject('Msxml2.XMLHTTP');\n\t    }, function () {\n\t      return new ActiveXObject('Msxml3.XMLHTTP');\n\t    }, function () {\n\t      return new ActiveXObject('Microsoft.XMLHTTP');\n\t    }];\n\t\n\t    for (var i = 0, len = XMLHttpFactories.length; i < len; i++) {\n\t      try {\n\t        xmlhttp = XMLHttpFactories[i]();\n\t      } catch (e) {\n\t        continue;\n\t      }\n\t      break;\n\t    }\n\t\n\t    return xmlhttp;\n\t  };\n\t\n\t  var formatParams = function formatParams(params, prefix) {\n\t    var str = [];\n\t    for (var p in params) {\n\t      if (Object.prototype.hasOwnProperty.call(params, p)) {\n\t        var k = prefix ? prefix + '[' + p + ']' : p;\n\t        var v = params[p];\n\t        str.push((typeof v === 'undefined' ? 'undefined' : _typeof(v)) === 'object' ? formatParams(v, k) : encodeURIComponent(k) + '=' + encodeURIComponent(v));\n\t      }\n\t    }\n\t    return str.join('&');\n\t  };\n\t  bugReporter.formatParams = formatParams;\n\t\n\t  var report = function report(method, url, data, cbSucs, cbFail) {\n\t    var req = createXMLHTTPObject();\n\t    if (!req) {\n\t      return cbFail && cbFail(req);\n\t    }\n\t\n\t    method = method.toUpperCase();\n\t    if (method === 'GET') {\n\t      url = url + '?' + formatParams(data) + '&_t=' + getTimeStamp();\n\t      data = null;\n\t    }\n\t\n\t    req.open(method, url, true);\n\t    if (method === 'POST') {\n\t      req.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');\n\t    } else if (method === 'JSON') {\n\t      req.setRequestHeader('Content-type', 'application/json;charset=UTF-8');\n\t    }\n\t\n\t    req.onreadystatechange = function () {\n\t      if (req.readyState === 4) {\n\t        if (req.status >= 200 && req.status < 300) {\n\t          cbSucs && cbSucs(req.responseText);\n\t        } else {\n\t          cbFail && cbFail(req);\n\t        }\n\t      }\n\t    };\n\t\n\t    req.send(data);\n\t  };\n\t  bugReporter.report = report;\n\t\n\t  var procData = function procData(data) {\n\t    if (bugReporter.window.length) {\n\t      data.window = {};\n\t    }\n\t    for (var i = 0, wLen = bugReporter.window.length; i < wLen; i++) {\n\t      data.window[bugReporter.window[i]] = window[bugReporter.window[i]];\n\t    }\n\t\n\t    if (bugReporter.navigator.length) {\n\t      data.navigator = {};\n\t    }\n\t    for (var j = 0, nLen = bugReporter.navigator.length; j < nLen; j++) {\n\t      data.navigator[bugReporter.navigator[j]] = window.navigator[bugReporter.navigator[j]];\n\t    }\n\t\n\t    if (bugReporter.screen.length) {\n\t      data.screen = {};\n\t    }\n\t    for (var k = 0, sLen = bugReporter.screen.length; k < sLen; k++) {\n\t      data.screen[bugReporter.screen[k]] = window.screen[bugReporter.screen[k]];\n\t    }\n\t\n\t    var bug = JSON.stringify(data);\n\t\n\t    if (bugReporter.sdk.ins) {\n\t      bugReporter.sdk.save(data);\n\t    }\n\t\n\t    if (bugReporter.url) {\n\t      report(bugReporter.type, bugReporter.url, bug, bugReporter.success, bugReporter.fail);\n\t    }\n\t\n\t    bugReporter.debug && console.log(bug);\n\t  };\n\t\n\t  var procError = function procError(msg, url, line, col, err) {\n\t    // 没有URL不上报！上报也不知道错误\n\t    if (msg.toLowerCase().indexOf('script error') > -1 || !url) {\n\t      return !bugReporter.output;\n\t    }\n\t\n\t    setTimeout(function () {\n\t      var stack = null;\n\t      if (!!err && (!!err.stack || !!err.stacktrace)) {\n\t        //如果浏览器有堆栈信息 直接使用\n\t        stack = (err.stack || err.stacktrace).toString();\n\t      } else if (!!arguments.callee) {\n\t        //尝试通过callee拿堆栈信息\n\t        var ext = [];\n\t        var f = arguments.callee.caller;\n\t        var c = 3; //这里只拿三层堆栈信息\n\t        while (f && --c > 0) {\n\t          ext.push(f.toString());\n\t          if (f === f.caller) {\n\t            break; //如果有环\n\t          }\n\t          f = f.caller;\n\t        }\n\t        stack = ext.join(',');\n\t      }\n\t\n\t      procData({\n\t        time: getTimeStamp(),\n\t        msg: msg, url: url, line: line,\n\t        col: col || window.event && window.event.errorCharacter || 0,\n\t        err: err, stack: stack\n\t      });\n\t    }, 0);\n\t\n\t    // 让浏览器不输出错误信息到控制台\n\t    return !bugReporter.output;\n\t  };\n\t\n\t  bugReporter.injectSDK = function (cb) {\n\t    var av = document.createElement('script');\n\t    av.setAttribute('type', 'text/javascript');\n\t    av.setAttribute('async', 'async');\n\t    av.src = bugReporter.sdk.url;\n\t    if (av.readyState) {\n\t      av.onreadystatechange = function () {\n\t        if (this.readyState === 'complete') {\n\t          av.onreadystatechange = null;\n\t          cb && cb();\n\t        }\n\t      };\n\t    } else {\n\t      av.onload = function () {\n\t        av.onload = null;\n\t        cb && cb();\n\t      };\n\t    }\n\t    var s = document.getElementsByTagName('script')[0];\n\t    s.parentNode.insertBefore(av, s);\n\t\n\t    bugReporter.uninjectSDK = function () {\n\t      av.parentNode.removeChild(av);\n\t    };\n\t  };\n\t\n\t  bugReporter.initSDK = function (appId, appKey, appClass) {\n\t    bugReporter.injectSDK(function () {\n\t      setTimeout(function () {\n\t        bugReporter.sdk.ins = bugReporter.sdk.init(appId, appKey, appClass);\n\t      }, 0);\n\t    });\n\t  };\n\t\n\t  bugReporter.sdk = {\n\t    ins: null,\n\t    url: '//cdn1.lncld.net/static/js/av-min-1.5.3.js',\n\t    init: function init(appId, appKey, appClass) {\n\t      if (window.AV && window.AV.init) {\n\t        window.AV.init({\n\t          appId: appId, appKey: appKey\n\t        });\n\t        return window.AV.Object.extend(appClass);\n\t      }\n\t    },\n\t    save: function save(data) {\n\t      var lc = new bugReporter.sdk.ins();\n\t      lc.save(data).then(function (obj) {\n\t        bugReporter.debug && console.log(obj);\n\t      }).catch(function (err) {\n\t        bugReporter.debug && console.error(err);\n\t      });\n\t    }\n\t  };\n\t\n\t  bugReporter.init = function (opts) {\n\t    if (!opts || !opts.url && !opts.appId && !opts.appKey && !opts.appClass) {\n\t      return;\n\t    }\n\t\n\t    bugReporter.appId = opts.appId;\n\t    bugReporter.appKey = opts.appKey;\n\t    bugReporter.appClass = opts.appClass;\n\t\n\t    bugReporter.debug = opts.debug || false;\n\t    bugReporter.output = opts.output || false;\n\t\n\t    bugReporter.url = opts.url;\n\t    bugReporter.type = opts.type || 'GET';\n\t    bugReporter.success = opts.success || function (text) {};\n\t    bugReporter.fail = opts.fail || function (req) {};\n\t\n\t    bugReporter.window = opts.window || [];\n\t    bugReporter.navigator = opts.navigator || ['language', 'platform', 'userAgent'];\n\t    bugReporter.screen = opts.screen || ['width', 'height'];\n\t\n\t    window.onerror = procError;\n\t\n\t    if (bugReporter.appId && bugReporter.appKey && bugReporter.appClass) {\n\t      bugReporter.initSDK(bugReporter.appId, bugReporter.appKey, bugReporter.appClass);\n\t    }\n\t  };\n\t\n\t  bugReporter.destory = function () {\n\t    window.onerror = null;\n\t    if (bugReporter.sdk.ins) {\n\t      bugReporter.uninjectSDK();\n\t    }\n\t  };\n\t\n\t  window.bugReporter = bugReporter;\n\t})();\n\t\n\texports.default = bugReporter;\n\tmodule.exports = exports['default'];\n\n/***/ }\n/******/ ])\n});\n;\n\n\n// WEBPACK FOOTER //\n// bugReporter.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 1e3d8c162e734281fab3","\nconst bugReporter = window.bugReporter || {};\n\n(function() {\n  if (window.bugReporter) {\n    return;\n  }\n\n  const getTimeStamp = function() {\n    return (new Date()).getTime();\n  };\n  bugReporter.getTimeStamp = getTimeStamp;\n\n  const createXMLHTTPObject = function() {\n    let xmlhttp = false;\n    const XMLHttpFactories = [\n      function() {\n        return new XMLHttpRequest();\n      },\n      function() {\n        return new ActiveXObject('Msxml2.XMLHTTP');\n      },\n      function() {\n        return new ActiveXObject('Msxml3.XMLHTTP');\n      },\n      function() {\n        return new ActiveXObject('Microsoft.XMLHTTP');\n      }\n    ];\n\n    for (let i = 0, len = XMLHttpFactories.length; i < len; i++) {\n      try {\n        xmlhttp = XMLHttpFactories[i]();\n      } catch (e) {\n        continue;\n      }\n      break;\n    }\n\n    return xmlhttp;\n  };\n\n  const formatParams = function(params, prefix) {\n    let str = [];\n    for (let p in params) {\n      if (Object.prototype.hasOwnProperty.call(params, p)) {\n        const k = prefix ? `${prefix}[${p}]` : p;\n        const v = params[p];\n        str.push((typeof v === 'object')\n          ? formatParams(v, k)\n          : (encodeURIComponent(k) + '=' + encodeURIComponent(v))\n        );\n      }\n    }\n    return str.join('&');\n  };\n  bugReporter.formatParams = formatParams;\n\n  const report = function(method, url, data, cbSucs, cbFail) {\n    const req = createXMLHTTPObject();\n    if (!req) {\n      return cbFail && cbFail(req);\n    }\n\n    method = method.toUpperCase();\n    if (method === 'GET') {\n      url = `${url}?${formatParams(data)}&_t=${getTimeStamp()}`;\n      data = null;\n    }\n\n    req.open(method, url, true);\n    if (method === 'POST') {\n      req.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');\n    } else if (method === 'JSON') {\n      req.setRequestHeader('Content-type', 'application/json;charset=UTF-8');\n    }\n\n    req.onreadystatechange = function() {\n      if (req.readyState === 4) {\n        if ((req.status >= 200) && (req.status < 300)) {\n          cbSucs && cbSucs(req.responseText);\n        } else {\n          cbFail && cbFail(req);\n        }\n      }\n    };\n\n    req.send(data);\n  };\n  bugReporter.report = report;\n\n  const procData = function(data) {\n    if (bugReporter.window.length) {\n      data.window = {};\n    }\n    for(let i = 0, wLen = bugReporter.window.length; i < wLen; i++) {\n      data.window[bugReporter.window[i]] = window[bugReporter.window[i]];\n    }\n\n    if (bugReporter.navigator.length) {\n      data.navigator = {};\n    }\n    for(let j = 0, nLen = bugReporter.navigator.length; j < nLen; j++) {\n      data.navigator[bugReporter.navigator[j]] = window.navigator[bugReporter.navigator[j]];\n    }\n\n    if (bugReporter.screen.length) {\n      data.screen = {};\n    }\n    for(let k = 0, sLen = bugReporter.screen.length; k < sLen; k++) {\n      data.screen[bugReporter.screen[k]] = window.screen[bugReporter.screen[k]];\n    }\n\n    const bug = JSON.stringify(data);\n\n    if (bugReporter.sdk.ins) {\n      bugReporter.sdk.save(data);\n    }\n\n    if (bugReporter.url) {\n      report(bugReporter.type, bugReporter.url,\n        bug,\n        bugReporter.success,\n        bugReporter.fail\n      );\n    }\n\n    bugReporter.debug && console.log(bug);\n  };\n\n  const procError = function(msg, url, line, col, err) {\n    // 没有URL不上报！上报也不知道错误\n    if ((msg.toLowerCase().indexOf('script error') > -1) || !url) {\n      return !bugReporter.output;\n    }\n\n    setTimeout(function() {\n      let stack = null;\n      if (!!err && (!!err.stack || !!err.stacktrace)) {\n        //如果浏览器有堆栈信息 直接使用\n        stack = (err.stack || err.stacktrace).toString();\n      } else if (!!arguments.callee) { //尝试通过callee拿堆栈信息\n        let ext = [];\n        let f = arguments.callee.caller;\n        let c = 3; //这里只拿三层堆栈信息\n        while (f && (--c > 0)) {\n          ext.push(f.toString());\n          if (f === f.caller) {\n            break; //如果有环\n          }\n          f = f.caller;\n        }\n        stack = ext.join(',');\n      }\n\n      procData({\n        time: getTimeStamp(),\n        msg, url, line,\n        col: col || (window.event && window.event.errorCharacter) || 0,\n        err, stack\n      });\n    }, 0);\n\n    // 让浏览器不输出错误信息到控制台\n    return !bugReporter.output;\n  };\n\n  bugReporter.injectSDK = function(cb) {\n    const av = document.createElement('script');\n    av.setAttribute('type', 'text/javascript');\n    av.setAttribute('async', 'async');\n    av.src = bugReporter.sdk.url;\n    if (av.readyState) {\n      av.onreadystatechange = function() {\n        if (this.readyState === 'complete') {\n          av.onreadystatechange = null;\n          cb && cb();\n        }\n      };\n    } else {\n      av.onload = function() {\n        av.onload = null;\n        cb && cb();\n      };\n    }\n    const s = document.getElementsByTagName('script')[0];\n    s.parentNode.insertBefore(av, s);\n\n    bugReporter.uninjectSDK = function() {\n      av.parentNode.removeChild(av);\n    };\n  };\n\n  bugReporter.initSDK = function(appId, appKey, appClass) {\n    bugReporter.injectSDK(function() {\n      setTimeout(function() {\n        bugReporter.sdk.ins = bugReporter.sdk.init(appId, appKey, appClass);\n      }, 0);\n    });\n  };\n\n  bugReporter.sdk = {\n    ins: null,\n    url: '//cdn1.lncld.net/static/js/av-min-1.5.3.js',\n    init: function(appId, appKey, appClass) {\n      if (window.AV && window.AV.init) {\n        window.AV.init({\n          appId, appKey\n        });\n        return window.AV.Object.extend(appClass);\n      }\n    },\n    save: function(data) {\n      const lc = new bugReporter.sdk.ins();\n      lc.save(data)\n        .then(function(obj) {\n          bugReporter.debug && console.log(obj);\n        }).catch(function(err) {\n          bugReporter.debug && console.error(err);\n        }\n      );\n    }\n  };\n\n  bugReporter.init = function(opts) {\n    if (!opts || (!opts.url && !opts.appId && !opts.appKey && !opts.appClass)) {\n      return;\n    }\n\n    bugReporter.appId = opts.appId;\n    bugReporter.appKey = opts.appKey;\n    bugReporter.appClass = opts.appClass;\n\n    bugReporter.debug = opts.debug || false;\n    bugReporter.output = opts.output || false;\n\n    bugReporter.url = opts.url;\n    bugReporter.type = opts.type || 'GET';\n    bugReporter.success = opts.success || function(text) {};\n    bugReporter.fail = opts.fail || function(req) {};\n\n    bugReporter.window = opts.window || [];\n    bugReporter.navigator = opts.navigator || ['language', 'platform', 'userAgent'];\n    bugReporter.screen = opts.screen || ['width', 'height'];\n\n    window.onerror = procError;\n\n    if (bugReporter.appId && bugReporter.appKey && bugReporter.appClass) {\n      bugReporter.initSDK(\n        bugReporter.appId,\n        bugReporter.appKey,\n        bugReporter.appClass\n      );\n    }\n  };\n\n  bugReporter.destory = function() {\n    window.onerror = null;\n    if (bugReporter.sdk.ins) {\n      bugReporter.uninjectSDK();\n    }\n  };\n\n  window.bugReporter = bugReporter;\n})();\n\nexport default bugReporter;\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js"],"sourceRoot":""}